<div class="main">
  <app-header></app-header>

  <div class="main">
    <div class="form-container">


      <div class="form">
        <h2>Sign Up</h2>
        <form [formGroup]="registrationForm" (ngSubmit)="submitForm()">

          <div class="form-outline">
            <nz-form-item>
              <nz-form-control nzHasFeedback [nzErrorTip]="name">
                <input type="text" formControlName="name" placeholder=" Name of User" class="form-control form-control-lg" />
                <div *ngIf="nameAlredyExist" class="text-danger">
                  <p>This user name is already registered. Please use different user name</p>
                </div>
                <ng-template #name let-control>
                  <ng-container *ngIf="control.hasError('pattern') || control.hasError('whitespace')">
                    Please input valid user name!!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>

          <div class="form-outline">
            <nz-form-item>
              <nz-form-control nzHasFeedback [nzErrorTip]="emailErrorTpl">
                <input type="email" formControlName="email" placeholder=" E-mail"class="form-control form-control-lg" />
              </nz-form-control>
              <ng-template #emailErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">
                  Please input your E-mail !
                </ng-container>
              </ng-template>
              <ng-template #emailErrorTpl let-control>
                <ng-container *ngIf="control.hasError('incorrect')">
                  Please input your E-mail 1!
                </ng-container>
              </ng-template>

            </nz-form-item>
          </div>

          <div class="form-outline">
            <nz-form-item>
              <nz-form-control nzHasFeedback [nzErrorTip]="passwordErrorTpl">
                <nz-input-group [nzSuffix]="suffixTemplatePassword">
                  <input nz-input [type]="passwordVisible ? 'text' : 'password'" formControlName="password" placeholder="Password" style="color: #000;"
                  (ngModelChange)="validateConfirmPassword()"/>
                </nz-input-group>
              </nz-form-control>
              <ng-template #passwordErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">
                  Please input your password!
                </ng-container>
                <ng-container *ngIf="control.hasError('minlength')">
                  Password minimum 8 digit
                </ng-container>
                <ng-container *ngIf="control.hasError('pattern')">
                  Your password must contain at least one uppercase, one lowercase, one special character and one number
                </ng-container>
              </ng-template>
            </nz-form-item>

            <ng-template #suffixTemplatePassword>
              <i nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'" (click)="passwordVisible = !passwordVisible"></i>
            </ng-template>
          </div>

          <div class="form-outline">
            <nz-form-item>
              <nz-form-control nzHasFeedback [nzErrorTip]="passwordErrorTpl">
                <nz-input-group [nzSuffix]="suffixTemplateConfirmPassword">
                  <input nz-input [type]="confirmPasswordVisible ? 'text' : 'Password'" formControlName="confirmPassword"placeholder="Confirm Password" style="color: #000;"/>
                </nz-input-group>
                <ng-template #passwordErrorTpl let-control>
                  <ng-container *ngIf="control.hasError('required')">
                    Please confirm your password!
                  </ng-container>
                  <ng-container *ngIf="control.hasError('confirm')">
                    Password is inconsistent!
                  </ng-container>
                </ng-template>
              </nz-form-control>
            </nz-form-item>

            <ng-template #suffixTemplateConfirmPassword>
              <i nz-icon [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'" (click)="confirmPasswordVisible = !confirmPasswordVisible"></i>
            </ng-template>
          </div>

          <!-- <div class="form-outline">
            <select formControlName="userTypeId" required placeholder="User Type">
              <option value="" disabled selected>Select User Type</option>
              <option *ngFor="let userType of userTypes" [value]="userType.userTypeId" style="color: #000;">{{ userType.title }}</option>
            </select>
          </div> -->

          <!-- <div class="form-outline">
            <select formControlName="evColabTypeId" required placeholder="User Type">
              <option value="" disabled selected>Select User Type</option>
              <option *ngFor="let eventColabType of evColabTypes" [value]="eventColabType.evColabTypeId" style="color: #000;">{{ eventColabType.name }}</option>
            </select>
          </div> -->

          <button type="submit" class="btn btn-success" [disabled]="!registrationForm.valid">Sign Up</button>&nbsp;
          <button type="reset" class="btn btn-danger" (click)="resetForm()">Cancel</button>
        </form>
      </div>
    </div>
  </div>
</div>
